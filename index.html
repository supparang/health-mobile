<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nutrition VR — จัดจานสุขภาพ (WebXR)</title>
  <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
  <style>
    .hud2d { position: fixed; right: 12px; top: 12px; z-index: 10; font-family: system-ui, Arial; background: rgba(0,0,0,.45); color:#fff; padding:10px 14px; border-radius:12px; min-width:220px }
    .hud2d b { font-size: 18px }
    .ui2d { position: fixed; left: 12px; bottom: 12px; z-index: 10; font-family: system-ui, Arial; }
    .ui2d button, .ui2d select { padding:10px 12px; border-radius:12px; border: none; font-weight:600; box-shadow: 0 2px 8px rgba(0,0,0,.15) }
  </style>
</head>
<body>
  <div class="ui2d">
    <select id="levelSel">
      <option value="1">Level 1 — เช้า 400–500 kcal</option>
      <option value="2">Level 2 — กลางวัน 550–700 kcal (ผัก ≥ 1)</option>
      <option value="3">Level 3 — เย็น 450–600 kcal (น้ำตาล ≤ 20g, โซเดียม ≤ 800mg)</option>
    </select>
    <button id="btnReset">เริ่มใหม่</button>
  </div>
  <div class="hud2d" id="hud">
    <div><b>Nutrition VR</b></div>
    <div>kcal: <span id="kcal">0</span></div>
    <div>โปรตีน: <span id="pro">0g</span> | คาร์บ: <span id="carb">0g</span></div>
    <div>ไฟเบอร์: <span id="fib">0g</span></div>
    <div>น้ำตาล: <span id="sug">0g</span> | โซเดียม: <span id="sod">0mg</span></div>
    <div>⭐ <span id="stars">☆☆☆</span></div>
  </div>

  <a-scene renderer="antialias:true; colorManagement:true" background="color:#0e1726">
    <!-- Camera / Rig with laser controllers -->
    <a-entity id="rig" position="0 1.6 2">
      <a-entity id="camera" camera look-controls wasd-controls="enabled:false"></a-entity>
      <a-entity id="ctrlR" laser-controls="hand: right" raycaster="objects: .clickable" line="color: #79a8ff"></a-entity>
      <a-entity id="ctrlL" laser-controls="hand: left" raycaster="objects: .clickable" line="color: #79a8ff"></a-entity>
      <!-- Cursor fallback for desktop -->
      <a-entity id="cursor" cursor="fuse:false" raycaster="objects: .clickable" position="0 0 -0.1">
        <a-ring radius-inner="0.004" radius-outer="0.006" color="#fff"></a-ring>
      </a-entity>
    </a-entity>

    <!-- Lights -->
    <a-entity light="type: ambient; color: #BBD1FF; intensity: 0.6"></a-entity>
    <a-entity light="type: directional; color: #FFF; intensity: 0.8" position="1 2 0"></a-entity>

    <!-- Table & Shelves -->
    <a-box color="#14213d" position="0 0.75 -1.2" depth="1.6" height="0.05" width="2.6"></a-box>
    <a-box color="#0b1220" position="-0.9 1.1 -1.2" depth="0.4" height="0.6" width="0.6"></a-box>
    <a-box color="#0b1220" position="0.0 1.1 -1.2" depth="0.4" height="0.6" width="0.6"></a-box>
    <a-box color="#0b1220" position="0.9 1.1 -1.2" depth="0.4" height="0.6" width="0.6"></a-box>

    <!-- Plate (drop zone) -->
    <a-cylinder id="plate" color="#1b2a41" position="0 0.78 -1.2" radius="0.35" height="0.03"></a-cylinder>
    <a-entity position="0 1.1 -1.2" text="value: วางอาหารลงจานนี้; color:#CFE8FF; align:center; width:2"></a-entity>

    <!-- Goal board -->
    <a-plane id="goalBoard" color="#0b1220" position="0 1.6 -1.8" width="2.2" height="0.9" material="shader: standard; emissive: #0b1220; emissiveIntensity: .4"></a-plane>
    <a-entity id="goalText" position="0 1.6 -1.79" text="value: เป้าหมาย; align:center; color:#fff; width:3"></a-entity>

    <!-- Food spawn anchors -->
    <a-entity id="spawnL" position="-0.9 1.3 -1.2"></a-entity>
    <a-entity id="spawnC" position="0.0 1.3 -1.2"></a-entity>
    <a-entity id="spawnR" position="0.9 1.3 -1.2"></a-entity>

    <!-- Audio -->
    <a-assets>
      <audio id="pickup" src="assets/pickup.wav"></audio>
      <audio id="place" src="assets/place.wav"></audio>
      <audio id="error" src="assets/error.wav"></audio>
    </a-assets>

    <!-- World floor -->
    <a-plane rotation="-90 0 0" width="20" height="20" color="#0b1220" position="0 0 0"></a-plane>

    <a-entity id="game"></a-entity>
  </a-scene>

  <script src="game.js"></script>
</body>
</html>
